<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>공공 데이터</title>
    </head>
    <body>
        <h1>웰컴파일!</h1>

        <h2>노선별로 경유하는 정류장의 목록</h2>
	
        <button id = "btn1">정류소 목록 조회</button>
        <br><br>
        <table id = "resultTable" border = "1">
                <thead id = "resultHead">
                <tr>
                    <th>노선 ID</th>
                    <th>정류소ID</th>
                    <th>정류소명</th>
                    <th>정류소번호</th>
                    <th>정류소순번</th>
                </tr>
            </thead>
            <tbody id = "resultBody">
            </tbody>
        </table>
    
    
    <script>
        const btn = document.getElementById("btn1");
        const resultBody = document.getElementById("resultBody");


        btn.addEventListener("click", function() {

            fetch("busInfo")
            .then(res => res.json())
            .then(data => {
                const jsonData = data.response.body.items.item;
                console.log(jsonData);
                
               resultBody.innerHTML = "";
           	
               for(let i in jsonData){
                   let item = jsonData[i];
  
                   const row = document.createElement("tr");
                   const routeid = document.createElement("td");
                   routeid.textContent = item.routeid;
                   row.appendChild(routeid);
                   const busNodeId = document.createElement("td");
                   busNodeId.textContent = item.nodeid;
                   row.appendChild(busNodeId);
                   const nodenm = document.createElement("td");
                   nodenm.textContent = item.nodenm;
                   row.appendChild(nodenm);
                   const nodeno = document.createElement("td");
                   nodeno.textContent = item.nodeno;
                   row.appendChild(nodeno);
                   const nodeord = document.createElement("td");
                   nodeord.textContent = item.nodeord;
                   row.appendChild(nodeord);
                   resultBody.appendChild(row);
               }


            })
            .catch(err => {
                console.log(err);
            })

        });



    </script>
    

















    </body>
</html>